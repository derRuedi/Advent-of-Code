'''
    Advent of Code Day 3
    https://adventofcode.com/2020/day/3
'''

# input list from website
my_puzzle = [
    "...#...#..#....#..#...#..##..#.",
    ".#..#.....#.#............###...",
    ".#...###....#.............##..#",
    "...##...##....#.....##..#.##...",
    ".....###.#.###..##.#.##.......#",
    "#...##.....#..........#..#.#.#.",
    "......##.......##..#....#.#....",
    "....#.###.##..#.#..##.##....#.#",
    ".......#.......###.#.#.##.....#",
    ".........#.#....#..........#.#.",
    ".#...##.....##.........#..#....",
    ".##....#.#.#...##......#.......",
    "##.#.#..#....#....#....#...#.#.",
    "##....#.#..##......#....##...#.",
    "....#..#..##..#.###.......#.#..",
    ".....##....###...........#.#.##",
    "#.....##.........#....##......#",
    "........###.#..#....#....#.....",
    "...#.......#.##..#.###......#..",
    "...............#..#....#.##....",
    "..#..###..#.#..#.........##..#.",
    "####..#..####..................",
    "#...####...#.......#.#.#...#...",
    "......###.....#......#..#..#...",
    "#...#.....##.....#.#..##...#.#.",
    "#...........##.......#.........",
    ".#..#.........#.#..##....#.....",
    "........##...#................#",
    "........#.###.#.###.#.#.##..##.",
    ".#....##.....#...##.#..#.#.....",
    "..#..#.....###....##.#....#.#.#",
    "#......##.##...##..#.........#.",
    "#..#..#.....#.....#.........#..",
    "#....#.#...###.........#...#...",
    ".#.#.....##......#.#......#....",
    "..##......##...#.#.#.#.........",
    "..#......#.....##.###.#.#..#...",
    "....#..#.......#..#..#.....#...",
    ".#.#.....#...#..........#......",
    "#.#..#...........#.#.##.#...#.#",
    "..#.#....###...#...#.....#.#...",
    "....##.#.###....####.......#...",
    ".....##....#.......#..#..#....#",
    "...##..#.#.#.#......#......#...",
    "...##...#....#...#......###...#",
    "........#..#.#.....#.###.......",
    "..#..##.#....#.#.........#...#.",
    ".....#.####....#.##.........#..",
    "......#...#...#.....#......###.",
    ".##.....#....#..#.#....#.....#.",
    "...........#...#....##..#...#..",
    ".....#....#.....#...##..#...#.#",
    ".#...#.........#.......#...#..#",
    "...#..#...#........#......#....",
    "..#..#####.#.....#.#....#...#.#",
    "...#.......#.#....#...##..#..#.",
    "####..#.#.###.#.#..............",
    ".##........#...#.#....#..#.....",
    "..#..............#.#..##...#.##",
    ".###.#.....#.#.....##.#......##",
    "....###.....#...#...#.#..#.....",
    "....###.#.##.......#....#...#..",
    "#..#...#......##..#.....#.#...#",
    "....#.#.........#..............",
    "#.##.##...#..#.#.#.....#...#.##",
    "#...#...#......#...........##..",
    "#.#.#......#............#.#....",
    ".#.#..######...#.#.........#.##",
    "..#.#..#...#......#............",
    "....#.....#......##..#.....#...",
    ".##............#....##..#......",
    ".#.#.#...#.##.............###.#",
    "#.#...#...#.....#....#.#.#.....",
    "........#..#......##.##.#.....#",
    ".....#.....#.#####...#....#....",
    ".#...#......#.........#.#......",
    "...#...#..##.....##....#..#....",
    "....#....##..#.........#.......",
    "..#........##..#.#........#....",
    "...#...##...........#...#....#.",
    ".....##.........#..#....#..#.#.",
    "#..#....##..#...##.....#..##.#.",
    "..#.#.#.#...#...#.....#.#....#.",
    ".......#.###...#.#.......#.#...",
    "....#..#..#.###.#.....###..#.#.",
    ".#..##......#..#..#....#.####..",
    "..##...........#...#.........#.",
    "......#..#...#..........#......",
    "....#..........#......##...#...",
    "....#..#.##........#.#...##.#..",
    "#.##......#........##.#...#...#",
    "#..#....#.....###........##....",
    "...........##.....##..#....#.##",
    "..#....#..#..#......#.#.....#..",
    "#....#.##....#.....##.......#..",
    ".#.....#.#..............#.##..#",
    ".#..#..#...#...#....#.#.....#..",
    "...###...##.#...#..#........#..",
    "#...#.##.#.....#.#....#..#.....",
    "#.....###.#.......#.#..#.#..##.",
    "....#..#..##.......###.#...#...",
    ".#...####...............#.....#",
    ".#.##.#.....#.....#.#......##.#",
    "#...........#.##....###.##....#",
    "...............#..........#....",
    ".....#..#.##.###.#.............",
    "...##.............#.....#.#..#.",
    "....#.#...#.#..#..#..#....#....",
    "..#.......#..........#...#...#.",
    "...............#.#.#...###....#",
    "....#...#.##....#..##....#.....",
    "........#.#.##.........##.##.##",
    "#.....###.......#.#....#..#..##",
    ".#..#...#......#.#..##.......#.",
    "#.....#.#........#.##..#..#....",
    ".###..##.#.......#......###....",
    ".#...###.....#.....#....###...#",
    "........##.##......#.#....#...#",
    ".#....#..#.........#..##...##..",
    ".......#.......##.#..#..##.....",
    "#..##..##......#.#......#.##...",
    "..#..###..#...#....#..#...#....",
    "#.............#.####.........##",
    "..#..................#...#..#..",
    "..#......#........##.......#.#.",
    ".#.#.#.#..###.....#....#.#.....",
    "...#.##.###.......#....#.......",
    "................##...#.....#...",
    "..#.###.#...#.####....#..#..#..",
    "..#....###....##..#.#.........#",
    ".#..#.#.....#........#....##...",
    ".....#..#......#..#..##.#.#....",
    ".#..#.........##....##......#..",
    ".....#.#...#...#.#...#.#...#.#.",
    "..#..#...#...#...##.#..###.....",
    "..#..##......#..##.#...##......",
    ".......#..##....##.#......#..#.",
    "..#......#.#.....#.##....##....",
    "..#....#......#......##........",
    "....##.#.#....#.......#.##.....",
    "#.....#...###....#....#...#....",
    "............#.#..#...#...#..#..",
    "..##.............##....#.......",
    ".#.......#.##.#......#....##...",
    "...##............#....#..#...#.",
    ".##.####.....#.#..###.#....#.##",
    "....##.#........#..#...#.......",
    "...#...###.##...........##..#..",
    "..##..##....#...#..#..........#",
    "..#.........#.#...##..........#",
    ".......##....#.#...##.....#..#.",
    ".............#.....#.#.......#.",
    "#.......#..##..##...##.#.......",
    "..............#.....#.#..#...##",
    "........##..#.....#...#...#.#..",
    "###.#.................#........",
    "...#........#...#.#######..#..#",
    "...#.##...##.#.#..######...#...",
    "#.......#..#....#..#.##.....#..",
    "#..#....##....#.##.......#....#",
    "#...#..#.#.#...#..#.##..#......",
    "....#..##....#..#.#...........#",
    ".##..#.#.............###.......",
    "#....##......#..#..#.....###...",
    "..#..........#...###.#.........",
    ".####......#....#......#.#....#",
    "..#....#.#.#......#....#.......",
    ".....#.....#....#....#####....#",
    ".##..........#...#.###....#....",
    "....##.....##......#...#.#.....",
    ".#...#...#..#.#.#...#####......",
    "...#.##..####.##.##.......##...",
    "............#.......#..........",
    ".#..##.#..#####........#..#...#",
    "#......##..##..##.........##...",
    "....#....#.............#.#....#",
    "###..#.....#.....#.#...#..#.###",
    "#...#.......##......#....#.#.#.",
    "...#......#..#...#....#...###.#",
    "....#....##.......#....#......#",
    "............#......##.##.....#.",
    "...#.........#......#....##..##",
    ".....##....##...#..###...#..#..",
    ".......##.#..........#.##.##...",
    "....##...........#.#..#..#.##.#",
    "#...#..##.##.#....#....#.#.....",
    "...##.#.....#..#..#..###....##.",
    "#.##.#..#..#.#.............#...",
    "..#.#.............###.....#....",
    "...#..#....#..#.....#.#..#..#..",
    "...#.....##.#...........#..##.#",
    ".........#.#.##..#..#.#...#....",
    "...#..##..#...#...###.##.#..#..",
    ".#..##...##......##..##........",
    "......##....##.#.##.#.#........",
    "...#..................#.....#..",
    ".##................#.#..#..###.",
    ".##.##.....#................#..",
    ".....#.#..........#...#..#.#..#",
    ".............#......#..#.#..#..",
    "...#...##..#........#....#.....",
    "#......#........##.##...##.....",
    "##..#..##....#...#............#",
    "..##..##.##....##..##........#.",
    "...#....#.#.#.#....#.#...##....",
    "....#...##..##.#.##...#..#...#.",
    "#..#....##.#.....#.......#...##",
    "##.#....#.............#..#.....",
    ".##..#..#.#.....#.......#.#..#.",
    ".......#..#...##...#...###..#..",
    "..........#...#.#..##.....#...#",
    "..#....#...........#####....#..",
    "#....#..#.......##.............",
    ".........##..#####.......##....",
    "#..#..........#.....###...#..#.",
    ".#.#.#..#...#.......##...#####.",
    ".....#....#.###...#.......#....",
    "#.#.....##...###....###....#...",
    ".#.....#..#.#.#........#...#...",
    ".##.#.#.#......#....###....#...",
    ".#..##..####......###......#...",
    "......#.#.#.#.#...#...####.##..",
    ".#........##..#.....#....#....#",
    ".....###......##..#....#.......",
    "#.#.##...#.#......###..........",
    "........#.#...#..#......#....#.",
    "..##...##.........#.......#.#..",
    "..#.##....#...##.....#.###.....",
    ".........#..#.#....#....#.#.##.",
    "#.........#......#..#.......#..",
    "...#...##.......#.........#....",
    "............#......#...........",
    "##.....#.....#.#...#.....#.....",
    "..#.#...#..#...#.#...........#.",
    "#.#.#..#..#...##.#...#.#.....#.",
    ".#..###.#..##.#.....#.....#....",
    "##....##....#.......##..##.....",
    ".#..#...........###..........#.",
    ".#..#..#..........###..#.......",
    "#..###......#............##...#",
    "#......#........#..#..#..#.#...",
    ".......#.###...#.##............",
    ".##....#.......#.#...##.....#.#",
    "....#..#.#.......#.#...........",
    "##....#.###.#....#.#..##.#....#",
    "..#..#..#....#...#........##...",
    "...#...##....#..#.#...#..#.....",
    "......#..#......#....#.......#.",
    "#.#..............#...###...#..#",
    "...#....#..#..........#.#...#..",
    "#.....##..##.....#........#....",
    ".#...##..#.#..............#....",
    "##.#....#..##...#..#.####.#..#.",
    ".....#.......#.#.#.#..#.....###",
    "...#.##....#.#........##.......",
    "#...#.#...#.#..###..##.##...#.#",
    "###..............#.#.###.......",
    "...###..#.#..#....##...###.#...",
    "......##...........#...#..#...#",
    ".#..#.........##.......#..#...#",
    ".#.......###......##...#...#...",
    ".#......##...#........#.......#",
    ".#..#.....#.........#.#........",
    "#...#.#.....#...#..##.........#",
    "......##.#......##.#..##.#.....",
    "...............#.#..#....#....#",
    "#....#..#..#..#.#.....##...##..",
    "#.#......#.###......#..#...####",
    ".#.#..#...#...#.#..#.##.##.#.#.",
    ".....#.#...###...#.#.....##....",
    "...#..#.#..........##.#....#.#.",
    "...#..#.#.##.....###.##.#....#.",
    "..........#..###......#..#.#...",
    "###.....#..###..#...#..###.#...",
    "..#..#.....##.#.#..###.......#.",
    "....#....##........##..........",
    ".......#..........#...#......#.",
    ".#........#.#.#.#.#.......#....",
    ".#..#.......##..##....#.#...#..",
    ".#.#.#.......#..#..............",
    "#.#....#.#...#.#.#.....#.#...##",
    ".....#..........##..#.......#..",
    ".##......#.#....#.#.......#....",
    "..#.##....#.##.#...#...........",
    "...##......##..##.............#",
    "..........##.#.#..#..........#.",
    ".##....#..#..#.#....##.#...#.#.",
    "...........#....#.....#.#..#...",
    ".#.....#....##..#.........#....",
    ".....#.....#...#....#...#.###.#",
    "..#....#....#.....#...#......#.",
    ".....##..#.............#...#...",
    "........#..#.......#.#.......#.",
    "#...###..#.##.#...###...##..##.",
    "....##..#.......#...#.#........",
    ".#...#.#.##....####........#..#",
    ".#...#.#.####.##.#.............",
    "#..##...#....#...#.#.#.#.##..#.",
    ".#.......#........#.....###....",
    "#.#.....#....#..#....#..#....#.",
    "...#..#...#.....#.........##...",
    ".#....#......###...#....#.#.#..",
    "#.#........#......#...#....##..",
    ".....#..#......#..#..#......#..",
    ".#.....#..#.##.#.#.#...#......#",
    "##........#..#.#..#...#.####...",
    "..........##....#.#..#.#....#..",
    "#.##..#..#....#..#....##..#.#.#",
    "..#......#.......#...##..#.....",
    "##...#.........#......#......#.",
    ".#.....................#..#.##.",
    ".#.......#........#.#.#..##.#..",
    "..#..........#........#..##.#..",
    ".#...#...#.........##.#.#.#....",
    "....#....#.###.#....###....#.##",
    "....##......##........##.#.##..",
    "....#.#......#.##.#...#.##.....",
    "....#....#..#.#..###.#.#.......",
    "....#......#..#.#.......#..##..",
    ".....#..#.#.##.##..##.....#.#..",
    "...#....................##.....",
    "#.....#...##...#.#.............",
    "..#.#...#.#.#.....##..#....#..."
]

# print slope in a nice way
def print_slope(slope):
    for line in slope:
        print(line)

lines = len(my_puzzle)
width = len(my_puzzle[0])
total_trees = ''.join(my_puzzle).count("#")
# just some information about the data to get started
print(f"Original map: lines {lines} x width {width}; total trees: {total_trees}")



# Puzzle #1
print("\n\n*** Puzzle #1", end="\n\n")
sled_steps_down = 1
sled_steps_right = 3
rightmost_point = lines * sled_steps_right
map_multiplier = round(rightmost_point/31)+1

my_map = [ line*map_multiplier for line in my_puzzle ]
print(f"Extended map: lines {len(my_map)} x width {len(my_map[0])}; total trees: {''.join(my_map).count('#')}")

for i in range(0, lines, sled_steps_down):
    j = i * sled_steps_right
    # print(f"i:{i} j:{j}")
    s = list(my_map[i])
    if s[j] == ".":
        s[j] = "O"
    else:
        s[j] = "X"
    my_map[i] = ''.join(s)

# print_slope(my_map)
total_hits = ''.join(my_map).count("X")
print(f"Total hits: {total_hits}")

# Puzzle 2
# my_puzzle = [
#     "..##.......",
#     "#...#...#..",
#     ".#....#..#.",
#     "..#.#...#.#",
#     ".#...##..#.",
#     "..#.##.....",
#     ".#.#.#....#",
#     ".#........#",
#     "#.##...#...",
#     "#...##....#",
#     ".#..#...#.#"
# ]

print("\n\n*** Puzzle #2", end="\n\n")
def tree_encounters(tree_map, sled_steps_right, sled_steps_down):
    rightmost_point = len(tree_map) * sled_steps_right
    map_multiplier = round(rightmost_point/len(tree_map[0]))+1

    modified_tree_map = [ line * map_multiplier for line in tree_map ]
    print(f"Extended map: lines {len(modified_tree_map)} x width {len(modified_tree_map[0])}; total trees: {''.join(modified_tree_map).count('#')}")

    for i in range(0, len(modified_tree_map), sled_steps_down):
        
        j = round(i/sled_steps_down) * sled_steps_right
        s = list(modified_tree_map[i])
        if s[j] == ".":
            s[j] = "O"
        else:
            s[j] = "X"
        modified_tree_map[i] = ''.join(s)

    total_hits = ''.join(modified_tree_map).count("X")
    print(f"Total hits: {total_hits}")
    return total_hits


# Right 1, down 1.
# Right 3, down 1. (This is the slope you already checked.)
# Right 5, down 1.
# Right 7, down 1.
# Right 1, down 2.
multiplied_tree_encounters = (
    tree_encounters(my_puzzle, 1, 1) *
    tree_encounters(my_puzzle, 3, 1) *
    tree_encounters(my_puzzle, 5, 1) *
    tree_encounters(my_puzzle, 7, 1) *
    tree_encounters(my_puzzle, 1, 2)
)

print(multiplied_tree_encounters)




# ---------------------------------------

def tree_encounters2(tree_map, sled_steps_right, sled_steps_down):
    hit_count = 0
    rightmost_point = len(tree_map[0])

    for i in range(0, len(tree_map), sled_steps_down):
        j = (round(i/sled_steps_down) * sled_steps_right) % rightmost_point
        if tree_map[i][j] == "#":
            hit_count += 1
    
    print(f"Total hits: {hit_count}")
    return hit_count


# Right 1, down 1.
# Right 3, down 1. (This is the slope you already checked.)
# Right 5, down 1.
# Right 7, down 1.
# Right 1, down 2.
multiplied_tree_encounters2 = (
    tree_encounters2(my_puzzle, 1, 1) *
    tree_encounters2(my_puzzle, 3, 1) *
    tree_encounters2(my_puzzle, 5, 1) *
    tree_encounters2(my_puzzle, 7, 1) *
    tree_encounters2(my_puzzle, 1, 2)
)

print(multiplied_tree_encounters2)